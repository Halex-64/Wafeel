<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wafeel</title>
    <link rel="stylesheet" href="../CSS/quiz.css">
    <link rel="stylesheet" href="../LISTAS/lista_usuario.css">
    <link rel="stylesheet" href="./filmes_da_lista_dinamica.css">
    <link rel="stylesheet" href="../CSS/responsividade.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">    
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.cdnfonts.com/css/coolvetica-2" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"> <!--Impede de dar zoom-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>  
<body>
    <!--HEADER-->
    <header class="header_container">
        <nav class="barradenavegacao">
            <a href="/public/index.html"><img class="logo__image" src="../assets/img/logo.png" alt="Logo"></a>
            <ul class="links">
                <li><a href="/public/quiz.html">Quiz</a></li>
                <li><a href="#">Filmes</a></li>
                <li><a href="#">Séries</a></li>
                <li><a id="selecao_roxo" href="./listas.html">Listas</a></li>
                <li><img class="fa-solid fa-heart" src="../assets/img/favoritosicon.png"></a></img></li> 
                <li><img class="fa-solid fa-right-to-bracket" src="../assets/img/usuarioicon.png">  </img></li>
            </ul>
        </nav>
    </header>

    <!--HEADER RESPONSIVA-->
    <header class="header_responsiva">
        <nav class="barradenavegacao_responsiva">
            <a href="/public/index.html"><img class="logo__image" src="../assets/img/logo.png" alt="Logo"></a>
            <ul class="links" id="mobile-menu">
                <li><a href="/public/quiz.html">QUIZ</a></li>
                <li><a href="/public/filmes.html">FILMES</a></li>
                <li><a href="/public/series.html">SÉRIES</a></li>                                             
            </ul>
            <button class="menu-toggle" id="menu-toggle">☰</button>
        </nav>
    </header>

    <!--MENU DROP-DOWN RESPONSIVO-->
    <div class="menu_responsivo">
        <ul class="links" id="mobile-menu">
            <li><a href="/public/quiz.html">QUIZ</a></li>
            <li><a href="/public/filmes.html">FILMES</a></li>
            <li><a href="/public/series.html">SÉRIES</a></li> 
            <li><a href="/public/LISTAS/listas.html">LISTAS</a></li> 
            <li><a href="/public/favoritos.html">FAVORITOS</a></li>
            <li><a href="/public/perfil.html">PERFIL</a></li>                             
        </ul>
    </div>

    <!--BARRA NAVEGAÇÃO ENTRE LISTAS-->
    <div class="nav_listas">
        <div class="barra_listas">
            <li><a href="./listas.html">PRINCIPAIS LISTAS</a></li>
            <div id="linha_vertical"></div>
            <li><a id="selecao_roxo" href="./lista_usuario.html">SUAS LISTAS</a></li>
        </div>    
        <div id="linha_horizontal"></div>            
    </div>

    <!--BARRA NAVEGAÇÃO ENTRE LISTAS RESPONSIVA-->
    <div class="nav_listas_responsiva_direita">
        <div class="barra_listas">           
            <li><a id="selecao_roxo" class="suas_listas" href="./lista_usuario.html">SUAS LISTAS</a></li>
        </div>        
    </div>
    <div class="nav_listas_responsiva_esquerda">
        <div class="barra_listas">
            <li><a class="principais_listas" href="./listas.html">PRINCIPAIS LISTAS</a></li>
        </div>
    </div>

    <section>
        <!--TÍTULO DA LISTA-->
        <h1 id="titulo_lista" class="titulo_lista"></h1>

        <!--BARRA DE FILTRAGEM-->
        <div class="nav_filtro">            
            <div id="linha_horizontal"></div>
                <div class="barra_filtro">                    
                    <div class="filtro_categorias">
                        <div id="filtro_genero" class="filtro_seta" onclick="toggleDropdown('dropdown-genero', this)">
                            <li><a>GÊNERO</a></li>
                            <div class="arrow"></div>                        
                            <ul id="dropdown-genero" class="options">
                                <li class="option"></li>                            
                            </ul>
                        </div>
                        
                        <div id="filtro_ano" class="filtro_seta" onclick="toggleDropdown('dropdown-ano', this)">
                            <li><a>ANO</a></li>
                            <div class="arrow"></div>
                            <ul id="dropdown-ano" class="options">
                                <li class="option" onclick="filterByDecade(2020)">2020s</li>
                                <li class="option" onclick="filterByDecade(2010)">2010s</li>
                                <li class="option" onclick="filterByDecade(2000)">2000s</li>
                                <li class="option" onclick="filterByDecade(1990)">1990s</li>
                                <li class="option" onclick="filterByDecade(1980)">1980s</li>
                                <li class="option" onclick="filterByDecade(1970)">1970s</li>
                                <li class="option" onclick="filterByDecade(1960)">1960s</li>
                                <li class="option" onclick="filterByDecade(1950)">1950s</li>
                                <li class="option" onclick="filterByDecade(1940)">1940s</li>
                                <li class="option" onclick="filterByDecade(1930)">1930s</li>
                                <li class="option" onclick="filterByDecade(1920)">1920s</li>
                                <li class="option" onclick="filterByDecade(1910)">1910s</li>
                                <li class="option" onclick="filterByDecade(1900)">1900s</li>
                            </ul>
                        </div>
                        
                        <div id="filtro_faixa_etaria" class="filtro_seta" onclick="toggleDropdown('dropdown-faixa-etaria', this)">
                            <li><a>FAIXA ETÁRIA</a></li>
                            <div class="arrow"></div>
                            <ul id="dropdown-faixa-etaria" class="options">
                                <li class="option" onclick="filterByRating('L', 'G')">Livre</li>
                                <li class="option" onclick="filterByRating('10', 'PG')">10 Anos</li>
                                <li class="option" onclick="filterByRating('12', 'PG-13')">12 Anos</li>
                                <li class="option" onclick="filterByRating('14', 'PG-13')">14 Anos</li>
                                <li class="option" onclick="filterByRating('16', 'R')">16 Anos</li>
                                <li class="option" onclick="filterByRating('18', 'NC-17')">18 Anos</li>                                
                            </ul>
                        </div>
    
                        <div id="filtro_servico" class="filtro_seta" onclick="toggleDropdown('dropdown-servico', this)">
                            <li><a>SERVIÇO</a></li>
                            <div class="arrow"></div>
                            <ul id="dropdown-servico" class="options">
                                <li class="option"></li>                                        
                            </ul>
                        </div>

                        <!-- Botão para Resetar Filtros (inicialmente oculto) -->
                        <div class="resetar_filtro" id="resetar-filtro" style="display: none;">
                            <li><a href="javascript:void(0);" onclick="clearFilters()">Resetar Filtros</a></li>
                        </div>
                    </div>

                    <div class="editar_lista">
                        <button id="renomear_lista" onclick="editarTitulo()">
                            <li><a>RENOMEAR LISTA</a></li>
                        </button>                   
                        <button id="adicionar_titulo" onclick="">
                            <li><a>ADICIONAR TÍTULO</a></li>
                        </button>
                        <button id="excluir_lista" onclick="">
                            <i class="fas fa-trash-alt icone-grande"></i>
                        </button>                          
                    </div>
                </div> 
            <div id="linha_horizontal"></div>
        </div>      
        
        <!--BARRA DE FILTRAGEM >>RESPONSIVA<<-->
            <!-- Sobreposição de fundo escuro -->
            <div id="overlay" class="overlay"></div>
            <!--BOTÃO DE FILTRO<<-->
            <button id="botao-filtro" onclick="toggleFiltro()">
                &#10011; Adicionar Filtro
            </button>
            
            <!--CONTAINER ROXO COM OS FILTROS<<-->
            <div id="filtro-container" class="barra_filtro_oculta">
                <div class="container_filtro">
                    <h1>Gênero</h1>
                    <ul id="dropdown-genero">
                        <li class="option">Ação</li>
                        <li class="option">Ficção Científica</li>
                        <li class="option">Aventura</li>
                        <li class="option">Guerra</li>
                        <li class="option">Drama</li>
                        <li class="option">Terror</li>
                        <li class="option">Mistério</li>
                        <li class="option">Thriller</li>
                        <li class="option">Romance</li>
                        <li class="option">Crime</li>
                    </ul>
                </div>

                <div class="container_filtro">
                    <h1>Ano</h1>
                    <ul id="dropdown-ano">
                        <li class="option" onclick="filterByDecade(2020)">2020s</li>
                        <li class="option" onclick="filterByDecade(2010)">2010s</li>
                        <li class="option" onclick="filterByDecade(2000)">2000s</li>
                        <li class="option" onclick="filterByDecade(1990)">1990s</li>
                        <li class="option" onclick="filterByDecade(1980)">1980s</li>
                        <li class="option" onclick="filterByDecade(1970)">1970s</li>
                        <li class="option" onclick="filterByDecade(1960)">1960s</li>
                        <li class="option" onclick="filterByDecade(1950)">1950s</li>
                        <li class="option" onclick="filterByDecade(1940)">1940s</li>
                        <li class="option" onclick="filterByDecade(1930)">1930s</li>
                        <li class="option" onclick="filterByDecade(1920)">1920s</li>
                        <li class="option" onclick="filterByDecade(1910)">1910s</li>
                        <li class="option" onclick="filterByDecade(1900)">1900s</li>
                    </ul>
                    <button id="resetar-filtro" onclick="resetFilters()" style="display: none;">Resetar Filtro</button>
                </div>                

                <div class="container_filtro">
                    <h1>Fixa Etária</h1>
                    <ul id="dropdown-faixa-etaria">
                        <li class="option">Livre</li>
                        <li class="option">10 Anos</li>
                        <li class="option">12 Anos</li>
                        <li class="option">14 Anos</li>
                        <li class="option">16 Anos</li>
                        <li class="option">18 Anos</li>
                    </ul>
                </div>

                <div class="container_filtro">
                    <h1>Serviço</h1>
                    <ul id="dropdown-servico">  
                        <li class="option">Max</li>
                        <li class="option">Claro tv+</li>
                        <li class="option">Max Amazon Channel</li>
                        <li class="option">Disney Plus</li>
                        <li class="option">Amazon Prime Video</li>
                        <li class="option">Paramount Plus</li>
                        <li class="option">Paramount+ Amazon Channel</li> 
                        <li class="option">Paramount Plus Apple TV Channel</li>
                        <li class="option">MUBI</li>
                        <li class="option">MUBI Amazon Channel</li>
                    </ul>                   
                </div>              
            </div>
        <!------------------------------------->

        <!--CARDS COM O RESUMO DOS FILMES-->        
        <div class="container_filmes">            
        </div>                    
    </section>   

    <!--FOOTER-->
    <footer>
        <div class="social-icons">
            <a href="#">
                <img src="/public/assets/img/whatsapp_icon.png" id="WhatsApp_icon" alt="WhatsApp">
            </a>
            <a href="#">
                <img src="/public/assets/img/instagram_icon.png" id="Instagram_icon" alt="Instagram">
            </a>
            <a href="#">
                <img src="/public/assets/img/help_icon.png" id="suporte_icon" alt="Suporte">
            </a>
        </div>
    </footer>

    <!--FOOTER RESPONSIVO-->
    <footer class="footer_responsivo">
        <div class="footer_links">        
            <a href="#">Login</a>
            <a href="#">Suporte</a>
            <a href="#">Sobre Nós</a>        
        </div>
        <div class="social-icons">
            <a href="#"><img src="/public/assets/img/whatsapp_icon.png" id="WhatsApp_icon" alt="WhatsApp"></a>
            <a href="#"><img src="/public/assets/img/instagram_icon.png" id="Instagram_icon" alt="Instagram"></a>         
        </div>
        <h3>Seu mundo de histórias, personalizado.</h3>
        <a class="logo_footer_responsivo"><img class="logo__image" src="../assets/img/logo.png" alt="Logo"></a>
        <div class="politica_termos">
            <p class="politica_priv">Política de Privacidade</p>
            <p class="term_cond">Termos e Condições</p>
        </div>    
    </footer>

    <script>
        //JAVASCRIPT HEADER RESPONSIVA
        const menuToggle = document.getElementById('menu-toggle');
        const menuResponsive = document.querySelector('.menu_responsivo');
        const headerResponsive = document.querySelector('.header_responsiva');
        const toggleCor = document.querySelector('.menu-toggle');
        const logoImage = document.querySelector('.barradenavegacao_responsiva .logo__image'); // Seleção específica

        menuToggle.addEventListener('click', () => {
            menuResponsive.classList.toggle('show'); // Alterna a classe para abrir/fechar o menu
            headerResponsive.classList.toggle('header-active'); // Alterna a cor da header_responsiva
            toggleCor.classList.toggle('menu-toggle-active');
            logoImage.classList.toggle('logoImage-active'); // Adiciona a classe que ativa o filtro
        });
        
        //FUNCIONAMENTO DO DROP-DOWN NA BARRA DE FILTRAGEM
        function toggleDropdown(dropdownId, button) {
            const dropdowns = document.querySelectorAll('.options');
            
            // Ocultar todos os outros dropdowns
            dropdowns.forEach(dropdown => {
                if (dropdown.id !== dropdownId) {
                    dropdown.style.display = 'none';
                }
            });
    
            const dropdown = document.getElementById(dropdownId);
            const isVisible = dropdown.style.display === "block";
            
            // Alterna a visibilidade do dropdown clicado
            dropdown.style.display = isVisible ? "none" : "block";
    
            // Calcula a posição do botão
            if (!isVisible) {                    
                // Calculate adjusted top position for the dropdown
                const adjustedTop = rect.bottom + windowTop - parentRect.top + 'px'; // Corrected calculation

                // Set the dropdown's position and width
                dropdown.style.top = adjustedTop;
                dropdown.style.width = button.offsetWidth + 'px';
            }
        }
                
        //DROP-DOWN FECHA AO CLICAR FORA
        document.addEventListener('click', (event) => {
            const dropdowns = document.querySelectorAll('.options');
            dropdowns.forEach(dropdown => {
                const button = document.querySelector(`.filtro_seta[onclick*="${dropdown.id}"]`);
                if (!dropdown.contains(event.target) && !button.contains(event.target)) {
                    dropdown.style.display = 'none';
                }
            });
        });        

        //CONTAINER ROXO DA FILTRAGEM RESPONSIVA
        function toggleFiltro() {
            const filtroContainer = document.getElementById('filtro-container');
            const body = document.body;
            const overlay = document.getElementById('overlay');

            // Alterna a classe "ativo" no filtro
            const isActive = filtroContainer.classList.toggle('ativo');

            // Alterna a classe "no-scroll" no body para desativar o scroll
            if (isActive) {
                body.classList.add('no-scroll');
                overlay.style.display = 'block'; // Mostra a sobreposição escura
                // Adiciona o event listener para fechar o filtro ao clicar fora
                document.addEventListener('click', outsideClickListener);
            } else {
                body.classList.remove('no-scroll');
                overlay.style.display = 'none'; // Esconde a sobreposição escura
                // Remove o event listener quando o filtro for fechado
                document.removeEventListener('click', outsideClickListener);
            }
        }

        function outsideClickListener(event) {
            const filtroContainer = document.getElementById('filtro-container');
            const botaoFiltro = document.getElementById('botao-filtro');
            const overlay = document.getElementById('overlay');

            // Verifica se o clique foi fora do filtro container e do botão de filtro
            if (!filtroContainer.contains(event.target) && event.target !== botaoFiltro) {
                // Fecha o filtro, remove o scroll e esconde a sobreposição
                filtroContainer.classList.remove('ativo');
                document.body.classList.remove('no-scroll');
                overlay.style.display = 'none';
                
                // Remove o listener após fechar
                document.removeEventListener('click', outsideClickListener);
            }
        }
    </script>
    <script src="/public/LISTAS/lista_dinamica.js"></script>
</body>
</html>